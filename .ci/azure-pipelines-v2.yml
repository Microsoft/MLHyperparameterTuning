# MLHyperparameterTuning  Pipeline
#
# The following variables must be set within the DevOps portal.
#
# azureSubscription: (str) - Name of the ADO Service Connection. EX: NAME_OF_SUB(XXX-XXX-XXX)
# azure_subscription (guid) - The subscription ID. EX XXXX-XXXX-XXXX
# 
# A Github Service Connection must also be created with the name "AIArchitecturesAndPractices-GitHub"

resources:
  repositories:
    - repository: aitemplates
      type: github
      name: microsoft/AI
      endpoint: AIArchitecturesAndPractices-GitHub

variables:
- template: .ci/vars/mlhyperparametertuning_vars.yml@aitemplates

# In additional to the above variables, the "template" parameter of the last step must also be hard coded for each workload

trigger:
  batch: true
  branches:
    include:
    - mabou/instrument

stages:
- template: .ci/stages/deploy_notebooks_stages_v2.yml@aitemplates
  parameters:
    jobDisplayName: $(DeploymentName)
    TridentWorkloadTypeShort: $(TridentWorkloadTypeShort)
    DeployLocation: $(DeployLocation)
    DefaultWorkingDirectory: $(System.DefaultWorkingDirectory)
    Template: ${{variables.Template}}
    ProjectLocation: $(ProjectLocation)
    PythonPath: $(PythonPath)
